<%- include('partials/header') %>
    <div class="passwords container-fluid">
        <h1 class="mt-3 mb-2">Your Passwords</h1>
        <table class="table table-hover table-responsive">
            <thead>
                <tr>
                    <th>Website</th>
                    <th>Username</th>
                    <th>Password</th>
                    <th>Action</th>
                </tr>
            </thead>

            <tbody>
                <% for(var i=0; i < userData.length; i++) { %>
                    <tr>
                        <td>
                            <%= userData[i].website %>
                        </td>
                        <td>
                            <%= userData[i].username %>
                        </td>
                        <td>
                            <!-- Add an id and data-password attribute -->
                            <span id="password<%= i %>" class="password-hidden"
                                data-password="<%= userData[i].passwords %>">
                                ********
                            </span>
                        </td>
                        <td>
                            <button type="button" class="btn btn-primary btn-sm"
                                onclick="togglePassword('<%= i %>')">Show</button>
                            <a href="/delete?serialid=<%=userData[i].serialid %>"><button
                                    class="btn btn-danger btn-sm">Delete</button></a>
                        </td>
                    </tr>
                    <% } %>
            </tbody>
        </table>
    </div>

    <!-- toggle password visibility -->
    <script>
        function togglePassword(index) {
            var passwordElement = document.getElementById('password' + index);
            var originalPassword = passwordElement.getAttribute('data-password');

            if (passwordElement.classList.contains('password-hidden')) {
                // Show the original password
                passwordElement.textContent = originalPassword;
                passwordElement.classList.remove('password-hidden');
            } else {
                // Hide the password
                passwordElement.textContent = '********';
                passwordElement.classList.add('password-hidden');
            }
        }
    </script>

    <div class="details col-sm-4 ms-3 container-fluid">
        <h2>Enter your details</h2>
        <form action="/submit" method="POST">
            <div class="form-group">
                <label for="website">Website Name</label>
                <input type="text" class="form-control" name="website">
            </div>
            <div class="form-group">
                <label for="email">Email</label>
                <input type="text" class="form-control" name="username">
            </div>
            <div class="form-group">
                <label for="password">Password</label>
                <input type="password" class="form-control" name="password">
            </div>
            <button type="submit" class="btn btn-dark mt-2">Submit</button>
        </form>
    </div>
    <%- include('partials/footer') %>